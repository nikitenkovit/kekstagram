{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/api.js","webpack:///./src/const.js","webpack:///./src/main.js","webpack:///./src/model/pictures.js","webpack:///./src/presenter/big-picture-overlay.js","webpack:///./src/presenter/board.js","webpack:///./src/presenter/new-image.js","webpack:///./src/presenter/picture.js","webpack:///./src/utils/drag-n-drop.js","webpack:///./src/utils/hashtags-validation.js","webpack:///./src/utils/observer.js","webpack:///./src/utils/render.js","webpack:///./src/view/abstract.js","webpack:///./src/view/big-picture-overlay.js","webpack:///./src/view/comment.js","webpack:///./src/view/filter.js","webpack:///./src/view/img-upload-message-loading.js","webpack:///./src/view/img-upload-overlay.js","webpack:///./src/view/picture.js","webpack:///./src/view/pictures-container.js","webpack:///./src/view/social-load-more-btn.js","webpack:///./src/view/upload-new-img-form.js"],"names":[],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAA+C;;AAE/C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,YAAY;AACnC;AACA,6CAA6C;AAC7C;;AAEA;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA;AACA,+BAA+B,mCAAmC;AAClE,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,mCAAmC;AAClE,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA,QAAQ;AACR;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,WAAW,eAAe,GAAG,IAAI;AACjC,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB,gBAAgB,IAAI,oBAAoB;AACjE;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;ACzFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO;;AAEA;;AAEA;AACP;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AAC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E;;AAEA;AACA;AACA;;;;;;;;;;;;;AC7BA;AAAA;AAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;ACvCA;AAAA;AAAA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,0BAA0B;AAC3C;AACA;AACA,wDAAwD,iBAAiB;AACzE,KAAK;AACL;AACA,uEAAuE,iBAAiB;AACxF,KAAK;AACL;AACA,uDAAuD,iBAAiB;AACxE,KAAK;AACL;AACA,iFAAiF,iBAAiB;AAClG;;AAEA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA;AACA,iHAAiH,iBAAiB;AAClI;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;ACzCA;AAAA;AAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;AChBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;;AAEpC;AACP;AACA;AACA;;AAEO;AACP,2BAA2B,yDAAQ;AACnC;AACA;;AAEA,uBAAuB,yDAAQ;AAC/B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEA,6BAA6B,yDAAQ;AACrC;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;AC9DA;AAAA;AAAA;AAAiD;;AAElC;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,sEAAa;AACnC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;AC3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsC;AACF;AACuB;AACI;;AAE/D,0CAA0C,kCAAkC;AAC5E;AACA;AACA;AACA;;AAEA;AACA,oDAAoD,IAAI;AACxD;;AAEA;AACA;AACA;AACA,yCAAyC,YAAY;AACrD,0EAA0E,MAAM;AAChF;AACA,4HAA4H,gBAAgB;AAC5I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,gCAAgC,iDAAY;AAC3D;AACA;;AAEA,2CAA2C,6DAAqB;;AAEhE;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iCAAiC,gDAAW;;AAE5C,IAAI,4DAAM;AACV;AACA,QAAQ,4DAAc;AACtB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,4DAAM;AACV;AACA,QAAQ,4DAAc;AACtB;;AAEA;AACA,IAAI,4DAAM;AACV;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;ACrGA;AAAA;AAAA;AAAsC;;AAEtC,gCAAgC,gBAAgB;AAChD;AACA;AACA,uGAAuG,OAAO;AAC9G,gCAAgC,QAAQ;AACxC;AACA;AACA;;AAEe,sBAAsB,iDAAY;AACjD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;ACpBA;AAAA;AAAA;AAAA;AAAyC;;AAElC;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,qBAAqB,oDAAY;AAChD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAsC;;AAEtC;AACA;AACA;;AAEe,sCAAsC,iDAAY;AACjE;AACA;AACA;AACA;;;;;;;;;;;;;ACVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsC;AACa;AACO;AACI;;AAE9D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,4FAA4F,KAAK;AACjG,gBAAgB,KAAK,IAAI,iCAAiC;AAC1D,2BAA2B,KAAK;AAChC,wDAAwD,KAAK;AAC7D,oBAAoB;AACpB;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B,KAAK;AAC/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,eAAe;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEe,+BAA+B,iDAAY;AAC1D;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,0CAA0C,WAAW;AACrD,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM,wEAAa;AACnB,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,gDAAgD,qDAAc;;AAE9D,uBAAuB,qDAAc;AACrC,qBAAqB,qDAAc;AACnC,KAAK,yBAAyB,qDAAc;AAC5C,qBAAqB,qDAAc;AACnC;;AAEA,mDAAmD,mBAAmB;AACtE;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,mDAAmD,qDAAc,eAAe;AAChF,mCAAmC,qDAAc;AACjD;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uDAAgB;AAC3C,KAAK;AACL;;AAEA;AACA;AACA,6BAA6B,YAAY;AACzC,wBAAwB,YAAY;AACpC,0BAA0B,YAAY;AACtC,wBAAwB,iBAAiB,uDAAgB,+BAA+B;AACxF,4BAA4B,iBAAiB,uDAAgB,YAAY,uDAAgB,cAAc,uDAAgB,sBAAsB;AAC7I;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA,kDAAkD,+BAA+B;;AAEjF;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,2CAA2C,mFAAgB;AAC3D;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;;;;;;AC/RA;AAAA;AAAA;AAAsC;;AAEtC,gCAAgC,qBAAqB;AACrD;AACA;AACA,uCAAuC,IAAI;AAC3C;AACA,8DAA8D,gBAAgB;AAC9E,2DAA2D,MAAM;AACjE;AACA;AACA;AACA;;AAEe,sBAAsB,iDAAY;AACjD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACxCA;AAAA;AAAA;AAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,gCAAgC,iDAAY;AAC3D;AACA;AACA;AACA;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAsC;;AAEtC;AACA;AACA;;AAEe,gCAAgC,iDAAY;AAC3D;AACA;AACA;AACA;;;;;;;;;;;;;ACVA;AAAA;AAAA;AAAsC;;AAEtC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEe,+BAA+B,iDAAY;AAC1D;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.js\");\n","import PictureModel from \"./model/pictures.js\";\r\n\r\nconst Method = {\r\n  GET: `GET`,\r\n  // PUT: `PUT`,\r\n  POST: `POST`,\r\n  // DELETE: `DELETE`\r\n};\r\n\r\nconst SuccessHTTPStatusRange = {\r\n  MIN: 200,\r\n  MAX: 299\r\n};\r\n\r\nexport default class Api {\r\n  constructor(endPoint, authorization) {\r\n    this._endPoint = endPoint;\r\n    this._authorization = authorization;\r\n  }\r\n\r\n  getPictures() {\r\n    return this._load({url: `data`})\r\n      .then(Api.toJSON)\r\n      // .then((pictures) => Object.assign({}, pictures));\r\n  }\r\n\r\n  // updateTask(task) {\r\n  //   return this._load({\r\n  //     url: `tasks/${task.id}`,\r\n  //     method: Method.PUT,\r\n  //     body: JSON.stringify(PhotosModel.adaptToServer(task)),\r\n  //     headers: new Headers({\"Content-Type\": `application/json`})\r\n  //   })\r\n  //     .then(Api.toJSON)\r\n  //     .then(PhotosModel.adaptToClient);\r\n  // }\r\n  //\r\n  // addTask(task) {\r\n  //   return this._load({\r\n  //     url: `tasks`,\r\n  //     method: Method.POST,\r\n  //     body: JSON.stringify(PhotosModel.adaptToServer(task)),\r\n  //     headers: new Headers({\"Content-Type\": `application/json`})\r\n  //   })\r\n  //     .then(Api.toJSON)\r\n  //     .then(PhotosModel.adaptToClient);\r\n  // }\r\n\r\n  // deleteTask(task) {\r\n  //   return this._load({\r\n  //     url: `tasks/${task.id}`,\r\n  //     method: Method.DELETE\r\n  //   });\r\n  // }\r\n\r\n  _load({\r\n    url,\r\n    method = Method.GET,\r\n    body = null,\r\n    // headers = new Headers()\r\n  }) {\r\n    // headers.append(`Authorization`, this._authorization);\r\n\r\n    return fetch(\r\n        `${this._endPoint}/${url}`,\r\n        {method, body}\r\n    )\r\n      .then(Api.checkStatus)\r\n      .catch(Api.catchError);\r\n  }\r\n\r\n  static checkStatus(response) {\r\n    if (\r\n      response.status < SuccessHTTPStatusRange.MIN ||\r\n      response.status > SuccessHTTPStatusRange.MAX\r\n    ) {\r\n      throw new Error(`${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    return response;\r\n  }\r\n\r\n  static toJSON(response) {\r\n    return response.json();\r\n  }\r\n\r\n  static catchError(err) {\r\n    throw err;\r\n  }\r\n}\r\n","export const COMMENT_COUNT_PER_STEP = 5;\r\n\r\nexport const FILE_TYPES = [`gif`, `jpg`, `jpeg`, `png`];\r\n\r\nexport const UpdateType = {\r\n  PATCH: `PATCH`,\r\n  MINOR: `MINOR`,\r\n  MAJOR: `MAJOR`,\r\n  INIT: `INIT`,\r\n};\r\n\r\nexport const UserAction = {\r\n  UPDATE_PICTURE: `UPDATE_PICTURE`,\r\n  ADD_PICTURE: `ADD_PICTURE`,\r\n  DELETE_PICTURE: `DELETE_PICTURE`\r\n};\r\n\r\nexport const ScaleParameter = {\r\n  DEFAULT: 75,\r\n  MIN: 25,\r\n  MAX: 100,\r\n  STEP: 25\r\n};\r\n\r\nexport const LimitEffectValue = {\r\n  PHOBOS_MAX: 3,\r\n  HEAT_MAX: 3,\r\n  HEAT_MIN: 1,\r\n  DEFAULT: 100\r\n};\r\n","// import ImgUploadOverlayView from \"./view/img-upload-overlay.js\";\r\n// import ImgUploadMessageDragndropView from \"./view/img-upload-message-dragndrop.js\";\r\n// import ImgUploadMessageErrorView from \"./view/img-upload-message-error.js\";\r\n// import ImgUploadMessageProcessingView from \"./view/img-upload-message-processing.js\";\r\n\r\nimport PicturesModel from \"./model/pictures.js\";\r\nimport BoardPresenter from \"./presenter/board.js\";\r\nimport {UpdateType} from \"./const.js\";\r\nimport Api from \"./api.js\";\r\n\r\nconst AUTHORIZATION = `Basic hS2sd3dfSwcl1sa2j1`;\r\nconst END_POINT = `https://javascript.pages.academy/kekstagram`;\r\n\r\nconst siteMainElement = document.querySelector(`main`);\r\n\r\nconst api = new Api(END_POINT, AUTHORIZATION);\r\n\r\nconst picturesModel = new PicturesModel();\r\n\r\nconst boardPresenter = new BoardPresenter(siteMainElement, picturesModel);\r\n\r\nboardPresenter.init();\r\n\r\napi.getPictures()\r\n  .then((tasks) => {\r\n    picturesModel.setPictures(UpdateType.INIT, tasks);\r\n    // console.log(picturesModel.getPictures())\r\n  })\r\n  .catch(() => {\r\n    picturesModel.setPictures(UpdateType.INIT, []);\r\n  });\r\n","import Observer from \"../utils/observer.js\";\r\n\r\nexport default class Pictures extends Observer {\r\n  constructor() {\r\n    super();\r\n    this._pictures = [];\r\n  }\r\n\r\n  setPictures(updateType, pictures) {\r\n    this._pictures = pictures.slice();\r\n\r\n    this._notify(updateType);\r\n  }\r\n\r\n  getPictures() {\r\n    return this._pictures;\r\n  }\r\n\r\n  // updatePhotos(updateType, update) {\r\n  //   const index = this._pictures.findIndex((picture) => picture.id === update.id);\r\n  //\r\n  //   if (index === -1) {\r\n  //     throw new Error(`Can't update unexisting picture`);\r\n  //   }\r\n  //\r\n  //   this._pictures = [\r\n  //     ...this._pictures.slice(0, index),\r\n  //     update,\r\n  //     ...this._pictures.slice(index + 1)\r\n  //   ];\r\n  //\r\n  //   this._notify(updateType, update);\r\n  // }\r\n\r\n  addPicture(updateType, update) {\r\n    this._pictures = [\r\n      update,\r\n      ...this._pictures\r\n    ];\r\n\r\n    this._notify(updateType, update);\r\n  }\r\n\r\n  deletePhoto(updateType, update) {\r\n    const index = this._pictures.findIndex((picture) => picture.id === update.id);\r\n\r\n    if (index === -1) {\r\n      throw new Error(`Can't delete unexisting picture`);\r\n    }\r\n\r\n    this._pictures = [\r\n      ...this._pictures.slice(0, index),\r\n      ...this._pictures.slice(index + 1)\r\n    ];\r\n\r\n    this._notify(updateType);\r\n  }\r\n}\r\n","import BigPictureOverlayView from \"../view/big-picture-overlay.js\";\r\nimport SocialLoadMoreBtnView from \"../view/social-load-more-btn\";\r\nimport {COMMENT_COUNT_PER_STEP, UserAction, UpdateType} from \"../const.js\";\r\nimport {render, RenderPosition, remove} from \"../utils/render\";\r\n\r\nexport const State = {\r\n  SAVING: `SAVING`,\r\n  DELETING: `DELETING`,\r\n  ABORTING: `ABORTING`\r\n};\r\n\r\nexport default class BigPictureOverlay { // added changeData and changeMode\r\n  constructor(pictureListContainer) {\r\n    this._pictureListContainer = pictureListContainer;\r\n    this._renderedCommentsCount = COMMENT_COUNT_PER_STEP;\r\n    this._socialLoadMoreBtnComponent = new SocialLoadMoreBtnView();\r\n    // this._changeData = changeData;\r\n    // this._changeMode = changeMode;\r\n\r\n    this._closePopap = this._closePopap.bind(this);\r\n    this._escKeyDownHandler = this._escKeyDownHandler.bind(this);\r\n    this._handleSocialLoadMoreBtnClick = this._handleSocialLoadMoreBtnClick.bind(this);\r\n  }\r\n\r\n  init(picture) {\r\n    this._picture = picture;\r\n    this._comments = this._picture.comments;\r\n\r\n    this._bigPictureOverlayComponent = new BigPictureOverlayView(this._picture, this._comments);\r\n\r\n    render(this._pictureListContainer, this._bigPictureOverlayComponent, RenderPosition.BEFOREEND);\r\n    this._renderComments(0, COMMENT_COUNT_PER_STEP);\r\n    this._renderSocialLoadMoreBtn();\r\n  }\r\n\r\n  resetPopapHandlers() {\r\n    this._bigPictureOverlayComponent.setCancelButtonClickHandler(this._closePopap);\r\n    document.addEventListener(`keydown`, this._escKeyDownHandler);\r\n  }\r\n\r\n  _closePopap() {\r\n    remove(this._bigPictureOverlayComponent);\r\n\r\n    document.removeEventListener(`keydown`, this._escKeyDownHandler);\r\n  }\r\n\r\n  _escKeyDownHandler(evt) {\r\n    if (evt.key === `Escape` || evt.key === `Esc`) {\r\n      evt.preventDefault();\r\n      this._closePopap();\r\n    }\r\n  }\r\n\r\n  _renderComments(from, to) {\r\n    this._bigPictureOverlayComponent.renderComments(from, to);\r\n  }\r\n\r\n  _renderSocialLoadMoreBtn() {\r\n    if (this._comments.length > COMMENT_COUNT_PER_STEP) {\r\n      this._bigPictureOverlayComponent.renderSocialLoadMoreBtn();\r\n      this._bigPictureOverlayComponent.setSocialLoadMoreBtnClickHandler(this._handleSocialLoadMoreBtnClick);\r\n    }\r\n  }\r\n\r\n  _removeSocialLoadMoreBtn() {\r\n    this._bigPictureOverlayComponent.removeSocialLoadMoreBtn(this._handleSocialLoadMoreBtnClick);\r\n  }\r\n\r\n  _handleSocialLoadMoreBtnClick() {\r\n    this._renderComments(this._renderedCommentsCount, this._renderedCommentsCount + COMMENT_COUNT_PER_STEP);\r\n    this._renderedCommentsCount += COMMENT_COUNT_PER_STEP;\r\n\r\n    if (this._renderedCommentsCount >= this._comments.length) {\r\n      this._removeSocialLoadMoreBtn();\r\n    }\r\n  }\r\n}\r\n","import FilterView from \"../view/filter.js\";\r\nimport ImgUploadMessageLoadingView from \"../view/img-upload-message-loading.js\";\r\nimport PicturesContainerView from \"../view/pictures-container\";\r\nimport UploadNewImgFormView from \"../view/upload-new-img-form.js\";\r\nimport PicturePresenter from \"./picture.js\";\r\nimport NewImagePresenter from \"./new-image\";\r\nimport {RenderPosition, render, remove} from \"../utils/render.js\";\r\nimport {UpdateType, FILE_TYPES} from \"../const.js\";\r\n\r\nexport default class Board {\r\n  constructor(container, picturesModel) {\r\n    this._picturesModel = picturesModel;\r\n    this._boardContainer = container;\r\n    this._isLoading = true;\r\n\r\n    this._filterComponent = null;\r\n    this._messageLoadingComponent = new ImgUploadMessageLoadingView();\r\n    this._picturesContainerComponent = new PicturesContainerView();\r\n    this._uploadNewImgFormComponent = new UploadNewImgFormView();\r\n\r\n    this._handleModelEvent = this._handleModelEvent.bind(this);\r\n    this._showImgUploadOverlay = this._showImgUploadOverlay.bind(this);\r\n  }\r\n\r\n  init() {\r\n    render(this._boardContainer, this._picturesContainerComponent, RenderPosition.BEFOREEND);\r\n    render(this._picturesContainerComponent, this._uploadNewImgFormComponent, RenderPosition.BEFOREEND);\r\n\r\n    this._uploadNewImgFormComponent.setImgUploadInputHandler(this._showImgUploadOverlay);\r\n\r\n    this._picturesModel.addObserver(this._handleModelEvent);\r\n\r\n    this._renderBoard();\r\n  }\r\n\r\n  _getPictures() {\r\n    return this._picturesModel.getPictures();\r\n  }\r\n\r\n  _handleModelEvent(updateType) {\r\n    switch (updateType) {\r\n      // case UpdateType.PATCH:\r\n      //   this._picturePresenter[data.id].init(data);\r\n      //   break;\r\n      // case UpdateType.MINOR:\r\n      //   this._clearBoard();\r\n      //   this._renderBoard();\r\n      //   break;\r\n      // case UpdateType.MAJOR:\r\n      //   this._clearBoard({resetRenderedTaskCount: true, resetSortType: true});\r\n      //   this._renderBoard();\r\n      //   break;\r\n      case UpdateType.INIT:\r\n        this._isLoading = false;\r\n        remove(this._messageLoadingComponent);\r\n        this._renderBoard();\r\n        break;\r\n    }\r\n  }\r\n\r\n  _renderFilters() {\r\n    if (this._filterComponent !== null) {\r\n      this._filterComponent = null;\r\n    }\r\n\r\n    this._filterComponent = new FilterView(); // needed add (this._currentSortType);\r\n    // this._sortComponent.setSortTypeChangeHandler(this._handleSortTypeChange);\r\n\r\n    render(this._boardContainer, this._filterComponent, RenderPosition.AFTERBEGIN);\r\n  }\r\n\r\n  _renderMessageProcessing() {\r\n    render(this._boardContainer, this._messageLoadingComponent, RenderPosition.BEFOREEND);\r\n  }\r\n\r\n  _renderPicture(picture) {\r\n    const picturePresenter = new PicturePresenter(this._picturesContainerComponent); // added this._handleViewAction, this._handleModeChange\r\n    picturePresenter.init(picture);\r\n    // this._picturePresenter[picture.id] = picturePresenter;\r\n  }\r\n\r\n  _renderPictures(pictures) {\r\n    pictures.forEach((picture) => this._renderPicture(picture));\r\n  }\r\n\r\n  _showImgUploadOverlay() { // переписать ивент Лоад на проммис\r\n    const file = this._uploadNewImgFormComponent.getFile();\r\n    const fileName = file.name.toLowerCase();\r\n\r\n    const matches = FILE_TYPES.some((type) => fileName.endsWith(type));\r\n\r\n    if (matches) {\r\n      const reader = new FileReader();\r\n\r\n      reader.addEventListener(`load`, () => {\r\n        const formContainer = this._uploadNewImgFormComponent.getFormContainer();\r\n        const newImagePresenter = new NewImagePresenter(formContainer);\r\n\r\n        newImagePresenter.init(reader.result);\r\n\r\n        // this._uploadNewImgFormComponent.resetInputValue();\r\n      });\r\n\r\n      reader.readAsDataURL(file);\r\n    }\r\n  }\r\n\r\n  _renderBoard() {\r\n    if (this._isLoading) {\r\n      this._renderMessageProcessing();\r\n      return;\r\n    }\r\n\r\n    this._renderFilters();\r\n\r\n    const pictures = this._getPictures();\r\n\r\n    this._renderPictures(pictures.slice());\r\n  }\r\n}\r\n","import ImgUploadOverlay from \"../view/img-upload-overlay\";\r\nimport {remove, render, RenderPosition} from \"../utils/render.js\";\r\n\r\nexport default class NewImage {\r\n  constructor(container) {\r\n    this._newImageContainer = container;\r\n\r\n    this._closeOverlay = this._closeOverlay.bind(this);\r\n    this._escKeyDownHandler = this._escKeyDownHandler.bind(this);\r\n  }\r\n\r\n  init(file) {\r\n    this._file = file;\r\n\r\n    this._imgUploadOverlayComponent = new ImgUploadOverlay(this._file);\r\n\r\n    render(this._newImageContainer, this._imgUploadOverlayComponent, RenderPosition.BEFOREEND);\r\n\r\n    this._imgUploadOverlayComponent.createMiniatures();\r\n\r\n    this._imgUploadOverlayComponent.setInitialImageSettings();\r\n\r\n    this._resetHandlers();\r\n    document.addEventListener(`keydown`, this._escKeyDownHandler);\r\n  }\r\n\r\n  _closeOverlay() {\r\n    document.removeEventListener(`keydown`, this._escKeyDownHandler);\r\n\r\n    remove(this._imgUploadOverlayComponent);\r\n  }\r\n\r\n  _escKeyDownHandler(evt) {\r\n    if (evt.key === `Escape` || evt.key === `Esc`) {\r\n      evt.preventDefault();\r\n      this._closeOverlay();\r\n    }\r\n  }\r\n\r\n  _resetHandlers() {\r\n    this._imgUploadOverlayComponent.setCancelButtonClickHandler(this._closeOverlay);\r\n    this._imgUploadOverlayComponent.setDraggingHandler();\r\n    this._imgUploadOverlayComponent.setScaleLineClickHandler();\r\n    this._imgUploadOverlayComponent.setResizeControlMinusClickHandler();\r\n    this._imgUploadOverlayComponent.setResizeControlPlusClickHandler();\r\n    this._imgUploadOverlayComponent.setEffectsListChangeHandler();\r\n    this._imgUploadOverlayComponent.setUserHashtagsChangeHandler();\r\n  }\r\n}\r\n","import PictureView from \"../view/picture.js\";\r\nimport BigPictureOverlayPresenter from \"./big-picture-overlay\";\r\nimport {render, RenderPosition} from \"../utils/render.js\";\r\n\r\nexport default class Picture {\r\n  constructor(pictureListContainer) {\r\n    this._pictureListContainer = pictureListContainer;\r\n\r\n    this._pictureComponent = null;\r\n\r\n    this._showPopap = this._showPopap.bind(this);\r\n  }\r\n\r\n  init(picture) {\r\n    this._picture = picture;\r\n\r\n    this._pictureComponent = new PictureView(this._picture);\r\n\r\n    this._pictureComponent.setClickHandler(this._showPopap);\r\n\r\n    render(this._pictureListContainer, this._pictureComponent, RenderPosition.BEFOREEND);\r\n  }\r\n\r\n  _showPopap() {\r\n    const bigPictureOverlayPresenter = new BigPictureOverlayPresenter(this._pictureListContainer);\r\n    bigPictureOverlayPresenter.init(this._picture);\r\n\r\n    bigPictureOverlayPresenter.resetPopapHandlers();\r\n  }\r\n}\r\n","export const startDragging = (evt, callback, scaleLine, scalePin, scaleLevel) => {\r\n  evt.preventDefault();\r\n\r\n  const scalePinPositionLimits = {\r\n    min: 0,\r\n    max: scaleLine.offsetWidth\r\n  };\r\n\r\n  let startX = evt.clientX;\r\n\r\n  const onMouseMove = (moveEvt) => {\r\n    moveEvt.preventDefault();\r\n\r\n    let shiftX = startX - moveEvt.clientX;\r\n\r\n    startX = moveEvt.clientX;\r\n\r\n    scalePin.style.left = (scalePin.offsetLeft - shiftX) + `px`;\r\n\r\n    if (parseInt(scalePin.style.left, 10) < scalePinPositionLimits.min) {\r\n      scalePin.style.left = scalePinPositionLimits.min + `px`;\r\n    }\r\n    if (parseInt(scalePin.style.left, 10) > scalePinPositionLimits.max) {\r\n      scalePin.style.left = scalePinPositionLimits.max + `px`;\r\n    }\r\n\r\n    scaleLevel.style.width = (parseInt(scalePin.style.left, 10) / scalePinPositionLimits.max) * 100 + `%`;\r\n\r\n    callback();\r\n  };\r\n\r\n  const onMouseUp = (upEvt) => {\r\n    upEvt.preventDefault();\r\n    document.removeEventListener(`mousemove`, onMouseMove);\r\n    document.removeEventListener(`mouseup`, onMouseUp);\r\n  };\r\n\r\n  document.addEventListener(`mousemove`, onMouseMove);\r\n  document.addEventListener(`mouseup`, onMouseUp);\r\n};\r\n","const MAXIMUM_HASHTAGS = 5;\r\nconst HASHTAG_MAX_LENGTH = 20;\r\n\r\nexport const validityHashtags = (userHashtags, errorColor) => {\r\n  let arrayHashtags = userHashtags.value.split(` `);\r\n\r\n  if (!userHashtags.value) {\r\n    return ``;\r\n  }\r\n\r\n  if (arrayHashtags.length > MAXIMUM_HASHTAGS) {\r\n    errorColor();\r\n    return `Хэш-тегов должно быть не больше пяти`;\r\n  }\r\n\r\n  for (let i = 0; i < arrayHashtags.length; i++) {\r\n    if (!arrayHashtags[i].startsWith(`#`)) {\r\n      errorColor();\r\n      return `Хэш-тег должен начинаться со знака \"#\": ${arrayHashtags[i]}`;\r\n    } else if (arrayHashtags[i].startsWith(`#`) && arrayHashtags[i].length < 2) {\r\n      errorColor();\r\n      return `Хэш-тег не должен состоять только из одного знака \"#\": ${arrayHashtags[i]}`;\r\n    } else if (arrayHashtags[i].lastIndexOf(`#`) !== 0 || arrayHashtags[i].indexOf(`,`) > -1) {\r\n      errorColor();\r\n      return `Хэш-теги должны разделяться пробелами: ${arrayHashtags[i]}`;\r\n    } else if (arrayHashtags[i].length > HASHTAG_MAX_LENGTH) {\r\n      errorColor();\r\n      return `Максимальная длина одного хэш-тега 20 символов, включая решётку: ${arrayHashtags[i]}`;\r\n    }\r\n\r\n    let currentHashtag = arrayHashtags[i].toLowerCase();\r\n    for (let j = i + 1; j < arrayHashtags.length; j++) {\r\n      let nextHashTag = arrayHashtags[j].toLowerCase();\r\n      if (currentHashtag === nextHashTag) {\r\n        errorColor();\r\n        return `Один и тот же хэш-тег не может быть использован дважды (хеш-теги не чувствительны в регистру): ${arrayHashtags[i]}`;\r\n      }\r\n    }\r\n  }\r\n\r\n  return ``;\r\n};\r\n","export default class Observer {\r\n  constructor() {\r\n    this._observers = [];\r\n  }\r\n\r\n  addObserver(observer) {\r\n    this._observers.push(observer);\r\n  }\r\n\r\n  removeObserver(observer) {\r\n    this._observers = this._observers.filter((existedObserver) => existedObserver !== observer);\r\n  }\r\n\r\n  _notify(event, payload) {\r\n    this._observers.forEach((observer) => observer(event, payload));\r\n  }\r\n}\r\n","import Abstract from \"../view/abstract.js\";\r\n\r\nexport const RenderPosition = {\r\n  AFTERBEGIN: `afterbegin`,\r\n  BEFOREEND: `beforeend`\r\n};\r\n\r\nexport const render = (container, child, place) => {\r\n  if (container instanceof Abstract) {\r\n    container = container.getElement();\r\n  }\r\n\r\n  if (child instanceof Abstract) {\r\n    child = child.getElement();\r\n  }\r\n\r\n  switch (place) {\r\n    case RenderPosition.AFTERBEGIN:\r\n      container.prepend(child);\r\n      break;\r\n    case RenderPosition.BEFOREEND:\r\n      container.append(child);\r\n      break;\r\n  }\r\n};\r\n\r\nexport const createElement = (template) => {\r\n  const newElement = document.createElement(`div`);\r\n  newElement.innerHTML = template;\r\n\r\n  return newElement.firstChild;\r\n};\r\n\r\n// export const replace = (newChild, oldChild) => {\r\n//   if (oldChild instanceof Abstract) {\r\n//     oldChild = oldChild.getElement();\r\n//   }\r\n//\r\n//   if (newChild instanceof Abstract) {\r\n//     newChild = newChild.getElement();\r\n//   }\r\n//\r\n//   const parent = oldChild.parentElement;\r\n//\r\n//   if (parent === null || oldChild === null || newChild === null) {\r\n//     throw new Error(`Can't replace unexisting elements`);\r\n//   }\r\n//\r\n//   parent.replaceChild(newChild, oldChild);\r\n// };\r\n\r\nexport const remove = (component) => {\r\n  if (component === null) {\r\n    return;\r\n  }\r\n\r\n  if (!(component instanceof Abstract)) {\r\n    throw new Error(`Can remove only components`);\r\n  }\r\n\r\n  component.getElement().remove();\r\n  component.removeElement();\r\n};\r\n","import {createElement} from \"../utils/render.js\";\r\n\r\nexport default class Abstract {\r\n  constructor() {\r\n    if (new.target === Abstract) {\r\n      throw new Error(`Can't instantiate Abstract, only concrete one.`);\r\n    }\r\n\r\n    this._element = null;\r\n    this._callback = {};\r\n  }\r\n\r\n  getTemplate() {\r\n    throw new Error(`Abstract method not implemented: getTemplate`);\r\n  }\r\n\r\n  getElement() {\r\n    if (!this._element) {\r\n      this._element = createElement(this.getTemplate());\r\n    }\r\n\r\n    return this._element;\r\n  }\r\n\r\n  removeElement() {\r\n    this._element = null;\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\nimport CommentView from \"./comment\";\r\nimport SocialLoadMoreBtnView from \"./social-load-more-btn\";\r\nimport {render, RenderPosition, remove} from \"../utils/render\";\r\n\r\nconst createBigPictureOverlayTemplate = ({comments, description, likes, url}) => {\r\n  return (\r\n    `<section class=\"big-picture overlay\">\r\n      <h2 class=\"big-picture__title visually-hidden\">Просмотр фотографии</h2>\r\n      <div class=\"big-picture__preview\">\r\n\r\n        <div class=\"big-picture__img\">\r\n          <img class=\"big-picture__img--img\" src=\"${url}\" alt=\"Выбранная фотография\" width=\"600\" height=\"600\">\r\n        </div>\r\n\r\n        <div class=\"big-picture__social social\">\r\n          <div class=\"social__header\">\r\n            <img class=\"social__picture\" src=\"img/avatar-1.svg\" alt=\"Аватар автора фотографии\" width=\"35\" height=\"35\">\r\n            <p class=\"social__caption\">${description}</p>\r\n            <p class=\"social__likes\">Нравится <span class=\"likes-count\">${likes}</span></p>\r\n          </div>\r\n          <div class=\"social__comment-count\"><span class=\"current-comment-count\">5</span> из <span class=\"comments-count\">${comments.length}</span> комментариев</div>\r\n          <ul class=\"social__comments\">\r\n          </ul>\r\n          <div class=\"social__loadmore-container\"></div>\r\n          <div class=\"social__footer\">\r\n            <img class=\"social__picture\" src=\"img/avatar-6.svg\" alt=\"Аватар комментатора фотографии\" width=\"35\" height=\"35\">\r\n            <input type=\"text\" class=\"social__footer-text\" placeholder=\"Ваш комментарий...\">\r\n            <button type=\"button\" class=\"social__footer-btn\" name=\"button\">Отправить</button>\r\n          </div>\r\n        </div>\r\n        <button type=\"reset\" class=\"big-picture__cancel cancel\" id=\"picture-cancel\">Закрыть</button>\r\n      </div>\r\n    </section>`\r\n  );\r\n};\r\n\r\nexport default class BigPictureOverlay extends AbstractView {\r\n  constructor(picture, comments) {\r\n    super();\r\n\r\n    this._socialLoadMoreBtnComponent = new SocialLoadMoreBtnView();\r\n\r\n    this._picture = picture;\r\n    this._comments = comments;\r\n\r\n    this.callback = {};\r\n\r\n    this._cancelButtonClickHandler = this._cancelButtonClickHandler.bind(this);\r\n    this._socialLoadMoreBtnClickHandler = this._socialLoadMoreBtnClickHandler.bind(this);\r\n  }\r\n\r\n  getTemplate() {\r\n    return createBigPictureOverlayTemplate(this._picture);\r\n  }\r\n\r\n  _cancelButtonClickHandler() {\r\n    this.callback.closePopap();\r\n  }\r\n\r\n  setCancelButtonClickHandler(callback) {\r\n    this.callback.closePopap = callback;\r\n\r\n    this.getElement().querySelector(`.big-picture__cancel`)\r\n      .addEventListener(`click`, this._cancelButtonClickHandler);\r\n  }\r\n\r\n  _renderComment(comment) {\r\n    const commentComponent = new CommentView(comment);\r\n\r\n    render(this.getElement().querySelector(`.social__comments`),\r\n        commentComponent,\r\n        RenderPosition.BEFOREEND);\r\n  }\r\n\r\n  renderComments(from, to) {\r\n    this._comments\r\n      .slice(from, to)\r\n      .forEach((comment) => this._renderComment(comment));\r\n  }\r\n\r\n  renderSocialLoadMoreBtn() {\r\n    render(this.getElement().querySelector(`.social__loadmore-container`),\r\n        this._socialLoadMoreBtnComponent,\r\n        RenderPosition.BEFOREEND);\r\n  }\r\n\r\n  removeSocialLoadMoreBtn() {\r\n    remove(this._socialLoadMoreBtnComponent);\r\n  }\r\n\r\n  _socialLoadMoreBtnClickHandler() {\r\n    this.callback.loadMoreComments();\r\n  }\r\n\r\n  setSocialLoadMoreBtnClickHandler(callback) {\r\n    this.callback.loadMoreComments = callback;\r\n\r\n    this.getElement().querySelector(`.social__loadmore`)\r\n      .addEventListener(`click`, this._socialLoadMoreBtnClickHandler);\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\n\r\nconst createCommentTemplate = ({avatar, message}) => {\r\n  return (\r\n    `<li class=\"social__comment\">\r\n      <img class=\"social__picture\"  alt=\"Аватар комментатора фотографии\" width=\"35\" height=\"35\" src=\"${avatar}\">\r\n      <p class=\"social__text\">${message}</p>\r\n    </li>`\r\n  );\r\n};\r\n\r\nexport default class Comment extends AbstractView {\r\n  constructor(comment) {\r\n    super();\r\n    this._comment = comment;\r\n  }\r\n\r\n  getTemplate() {\r\n    return createCommentTemplate(this._comment);\r\n  }\r\n}\r\n","import AbstractView from \"./abstract.js\";\r\n\r\nexport const createFilterTemplate = () => {\r\n  return (\r\n    `<section class=\"img-filters container\">\r\n      <h2 class=\"img-filters__title visually-hidden\">Фильтр фотографий</h2>\r\n\r\n      <form class=\"img-filters__form\" action=\"index.html\" method=\"get\" autocomplete=\"off\">\r\n        <button type=\"button\" class=\"img-filters__button img-filters__button--active\" id=\"filter-popular\">Популярные</button>\r\n        <button type=\"button\" class=\"img-filters__button\" id=\"filter-new\">Новые</button>\r\n        <button type=\"button\" class=\"img-filters__button\" id=\"filter-discussed\">Обсуждаемые</button>\r\n      </form>\r\n    </section>`\r\n  );\r\n};\r\n\r\nexport default class Filter extends AbstractView {\r\n  constructor(filters = null, currentFilterType = null) {\r\n    super();\r\n    this._filters = filters;\r\n    this._currentFilter = currentFilterType;\r\n\r\n    this._filterTypeChangeHandler = this._filterTypeChangeHandler.bind(this);\r\n  }\r\n\r\n  getTemplate() {\r\n    return createFilterTemplate(this._filters, this._currentFilter);\r\n  }\r\n\r\n  _filterTypeChangeHandler(evt) {\r\n    evt.preventDefault();\r\n    this._callback.filterTypeChange(evt.target.value);\r\n  }\r\n\r\n  setFilterTypeChangeHandler(callback) {\r\n    this._callback.filterTypeChange = callback;\r\n    this.getElement().addEventListener(`change`, this._filterTypeChangeHandler);\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\n\r\nconst createMessageLoadingTemplate = () => {\r\n  return `<div class=\"img-upload__message img-upload__message--loading\">Загружаем...</div>`;\r\n};\r\n\r\nexport default class ImgUploadMessageLoading extends AbstractView {\r\n  getTemplate() {\r\n    return createMessageLoadingTemplate();\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\nimport {startDragging} from \"../utils/drag-n-drop\";\r\nimport {ScaleParameter, LimitEffectValue} from \"../const\";\r\nimport {validityHashtags} from \"../utils/hashtags-validation\";\r\n\r\nconst EffectsName = [`none`, `chrome`, `sepia`, `marvin`, `phobos`, `heat`];\r\n\r\nconst EffectsNameToRussiaName = {\r\n  none: `Оригинал`,\r\n  chrome: `Хром`,\r\n  sepia: `Сепия`,\r\n  marvin: `Марвин`,\r\n  phobos: `Фобос`,\r\n  heat: `Зной`\r\n};\r\n\r\nconst SHAKE_ANIMATION_TIMEOUT = 600;\r\n\r\nconst createEffectsItemsTemplate = (name) => {\r\n  return (\r\n    `<li class=\"effects__item\">\r\n      <input type=\"radio\" class=\"effects__radio visually-hidden\" name=\"effect\" id=\"effect-${name}\"\r\n       value=\"${name}\" ${name === `none` ? `checked` : ``}>\r\n      <label for=\"effect-${name}\" class=\"effects__label\">\r\n      <span class=\"effects__preview effects__preview--${name}\">\r\n      Превью фото ${name === `none` ? `без эффекта` : EffectsNameToRussiaName[name]}\r\n      </span>\r\n      ${EffectsNameToRussiaName[name]}\r\n      </label>\r\n    </li>`\r\n  );\r\n};\r\n\r\nconst createImgUploadOverlayTemplate = (file) => {\r\n  return (\r\n    `<div class=\"img-upload__overlay\">\r\n        <div class=\"img-upload__wrapper\">\r\n          <div class=\"img-upload__preview-container\">\r\n  \r\n            <fieldset class=\"img-upload__resize resize\">\r\n              <button type=\"button\" class=\"resize__control resize__control--minus\">Уменьшить</button>\r\n              <input type=\"text\" class=\"resize__control resize__control--value\" value=\"50%\" title=\"Image Scale\" name=\"scale\" readonly>\r\n              <button type=\"button\" class=\"resize__control resize__control--plus\">Увеличить</button>\r\n            </fieldset>\r\n  \r\n            <div class=\"img-upload__preview\">\r\n              <img src=\"${file}\" alt=\"Предварительный просмотр фотографии\">\r\n            </div>\r\n  \r\n            <fieldset class=\"img-upload__scale scale\">\r\n              <input type=\"number\" class=\"scale__value\" name=\"effect-level\" min=\"0\" max=\"100\" value=\"100\">\r\n              <div class=\"scale__line\">\r\n                <div class=\"scale__pin\" tabindex=\"0\">Кнопка изменения глубины эффекта фотографии</div>\r\n                <div class=\"scale__level\">Глубина эффекта фотографии</div>\r\n              </div>\r\n            </fieldset>\r\n  \r\n            <button type=\"reset\" class=\"img-upload__cancel cancel\" id=\"upload-cancel\">Закрыть</button>\r\n          </div>\r\n  \r\n          <fieldset class=\"img-upload__effects effects\">\r\n            <ul class=\"effects__list\">\r\n             ${EffectsName.map((name) => createEffectsItemsTemplate(name))}\r\n            </ul>\r\n          </fieldset>\r\n  \r\n          <fieldset class=\"img-upload__text text\">\r\n            <input class=\"text__hashtags\" type=\"text\" name=\"hashtags\" placeholder=\"#хэш-тег\">\r\n            <p class=\"message-error\"></p>\r\n            <textarea class=\"text__description\" name=\"description\" placeholder=\"Ваш комментарий...\" maxlength=\"140\"></textarea>\r\n          </fieldset>\r\n  \r\n          <button type=\"submit\" class=\"img-upload__submit\" id=\"upload-submit\">Опубликовать</button>\r\n        </div>\r\n      </div>`\r\n  );\r\n};\r\n\r\nexport default class ImgUploadOverlay extends AbstractView {\r\n  constructor(file) {\r\n    super();\r\n\r\n    this.callback = {};\r\n\r\n    this._file = file;\r\n\r\n    this._scaleLine = this.getElement().querySelector(`.scale__line`);\r\n    this._scalePin = this.getElement().querySelector(`.scale__pin`);\r\n    this._scaleLevel = this.getElement().querySelector(`.scale__level`);\r\n    this._scaleValue = this.getElement().querySelector(`.scale__value`);\r\n    this._resizeInputValue = this.getElement().querySelector(`.resize__control--value`);\r\n    this._resizeControlMinus = this.getElement().querySelector(`.resize__control--minus`);\r\n    this._resizeControlPlus = this.getElement().querySelector(`.resize__control--plus`);\r\n    this._uploadedImage = this.getElement().querySelector(`.img-upload__preview`);\r\n    this._imageUploadScale = this.getElement().querySelector(`.img-upload__scale`);\r\n    this._effectsList = this.getElement().querySelector(`.effects__list`);\r\n    this._userHashtags = this.getElement().querySelector(`.text__hashtags`);\r\n\r\n    this._cancelButtonClickHandler = this._cancelButtonClickHandler.bind(this);\r\n    this._createScaleValueChangeEvent = this._createScaleValueChangeEvent.bind(this);\r\n    this._hashtagsBorderColorError = this._hashtagsBorderColorError.bind(this);\r\n\r\n    this._effectName = ``;\r\n  }\r\n\r\n  getTemplate() {\r\n    return createImgUploadOverlayTemplate(this._file);\r\n  }\r\n\r\n  _cancelButtonClickHandler() {\r\n    this.callback.closeOverlay();\r\n  }\r\n\r\n  setCancelButtonClickHandler(callback) {\r\n    this.callback.closeOverlay = callback;\r\n\r\n    this.getElement().querySelector(`.img-upload__cancel`)\r\n      .addEventListener(`click`, this._cancelButtonClickHandler);\r\n  }\r\n\r\n  createMiniatures() {\r\n    const miniatures = this.getElement().querySelectorAll(`.effects__preview`);\r\n\r\n    miniatures.forEach((elem) => {\r\n      elem.style.backgroundImage = `url(${this._file})`;\r\n    });\r\n  }\r\n\r\n  _getDragNDropElements() {\r\n    return [\r\n      this._scaleLine,\r\n      this._scalePin,\r\n      this._scaleLevel\r\n    ];\r\n  }\r\n\r\n  setDraggingHandler() {\r\n    this._scalePin.addEventListener(`mousedown`, (evt) => {\r\n      startDragging(evt, this._createScaleValueChangeEvent, ...this._getDragNDropElements());\r\n    });\r\n  }\r\n\r\n  _createScaleValueChangeEvent() {\r\n    const event = new Event(`change`);\r\n    this._scaleValue.dispatchEvent(event);\r\n\r\n    this._changeInputValue();\r\n\r\n    this._setEffectValue(this._scaleValue.value);\r\n  }\r\n\r\n  _changeInputValue() {\r\n    this._scaleValue.value = parseInt(this._scaleLevel.style.width, 10);\r\n  }\r\n\r\n  setScaleLineClickHandler() {\r\n    this._scaleLine.addEventListener(`click`, (evt) => {\r\n      this._changeValueScaleLineOnClick(evt, ...this._getDragNDropElements());\r\n    });\r\n  }\r\n\r\n  _changeValueScaleLineOnClick(evt, scaleLine, scalePin, scaleLevel) {\r\n    if (evt.target !== this._scalePin) {\r\n      evt.preventDefault();\r\n\r\n      let coordX = evt.offsetX;\r\n      let scaleLineWidth = scaleLine.offsetWidth;\r\n      let positionValueClick = ``;\r\n      if (coordX >= 0 && coordX <= scaleLineWidth) {\r\n        positionValueClick = (coordX / scaleLineWidth) * 100 + `%`;\r\n      }\r\n      scalePin.style.left = positionValueClick;\r\n      scaleLevel.style.width = positionValueClick;\r\n\r\n      this._createScaleValueChangeEvent();\r\n    }\r\n  }\r\n\r\n  _resizeImage(sign) {\r\n    let controlValue = this._resizeInputValue.value;\r\n\r\n    controlValue = parseInt(controlValue, 10) - ScaleParameter.STEP * sign;\r\n\r\n    if (controlValue > ScaleParameter.MAX) {\r\n      controlValue = ScaleParameter.MAX;\r\n    } else if (controlValue < ScaleParameter.MIN) {\r\n      controlValue = ScaleParameter.MIN;\r\n    }\r\n\r\n    this._uploadedImage.style.transform = `scale(${controlValue / 100})`;\r\n    this._resizeInputValue.value = controlValue + `%`;\r\n  }\r\n\r\n  setResizeControlMinusClickHandler() {\r\n    this._resizeControlMinus.addEventListener(`click`, () => {\r\n      this._resizeImage(1);\r\n    });\r\n  }\r\n\r\n  setResizeControlPlusClickHandler() {\r\n    this._resizeControlPlus.addEventListener(`click`, () => {\r\n      this._resizeImage(-1);\r\n    });\r\n  }\r\n\r\n  setInitialImageSettings() {\r\n    this._uploadedImage.style.transform = `scale(${ScaleParameter.DEFAULT / 100})`;\r\n    this._resizeInputValue.value = ScaleParameter.DEFAULT + `%`;\r\n    this._imageUploadScale.classList.add(`hidden`);\r\n\r\n    this._sliderSetStartPosition();\r\n  }\r\n\r\n  _setEffectName(evt) {\r\n    this._effectName = evt.target.value;\r\n  }\r\n\r\n  _visibilitySwitchScaleInput() {\r\n    this._uploadedImage.style.filter = ``;\r\n\r\n    // eslint-disable-next-line no-unused-expressions\r\n    this._effectName === `none`\r\n      ? this._imageUploadScale.classList.add(`hidden`)\r\n      : this._imageUploadScale.classList.remove(`hidden`);\r\n  }\r\n\r\n  setEffectsListChangeHandler() {\r\n    this._effectsList.addEventListener(`change`, (evt) => {\r\n      this._setEffectName(evt);\r\n      this._visibilitySwitchScaleInput();\r\n      this._sliderSetStartPosition();\r\n      this._setEffectValue(LimitEffectValue.DEFAULT);\r\n    });\r\n  }\r\n\r\n  _setEffectValue(value) {\r\n    const effectNameToEffectValue = {\r\n      'chrome': `grayscale(${value / 100})`,\r\n      'sepia': `sepia(${value / 100})`,\r\n      'marvin': `invert(${value + `%`})`,\r\n      'phobos': `blur(${((value / 100) * LimitEffectValue.PHOBOS_MAX).toFixed(2) + `px`})`,\r\n      'heat': `brightness(${((value / 100 * (LimitEffectValue.HEAT_MAX - LimitEffectValue.HEAT_MIN)) + LimitEffectValue.HEAT_MIN).toFixed(2)})`\r\n    };\r\n    this._uploadedImage.style.filter = effectNameToEffectValue[this._effectName];\r\n  }\r\n\r\n  _sliderSetStartPosition() {\r\n    this._scalePin.style.left = `100%`;\r\n    this._scaleLevel.style.width = `100%`;\r\n  }\r\n\r\n  _hashtagsBorderColorError() {\r\n    this._userHashtags.style.borderColor = `red`;\r\n  }\r\n\r\n  _hashtagsBorderColorDefault() {\r\n    this._userHashtags.style.borderColor = `rgb(118, 118, 118)`;\r\n  }\r\n\r\n  _showErrorMessage(message) {\r\n    const messageError = this.getElement().querySelector(`.message-error`);\r\n    messageError.style.display = `flex`;\r\n    messageError.textContent = message;\r\n\r\n    setTimeout(() => {\r\n      messageError.style.display = `none`;\r\n    }, 6000);\r\n  }\r\n\r\n  _setShakeAnimation() {\r\n    this._userHashtags.style.animation = `shake ${SHAKE_ANIMATION_TIMEOUT / 1000}s`;\r\n\r\n    setTimeout(() => {\r\n      this._userHashtags.style.animation = ``;\r\n    }, SHAKE_ANIMATION_TIMEOUT);\r\n  }\r\n\r\n  setUserHashtagsChangeHandler() {\r\n    this._userHashtags.addEventListener(`change`, () => {\r\n      this._hashtagsBorderColorDefault();\r\n      this._userHashtags.setCustomValidity(validityHashtags(this._userHashtags, this._hashtagsBorderColorError));\r\n      if (this._userHashtags.validity.customError) {\r\n        this._showErrorMessage(this._userHashtags.validationMessage);\r\n        this._setShakeAnimation();\r\n      }\r\n    });\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\n\r\nconst createPictureTemplate = ({comments, likes, url}) => {\r\n  return (\r\n    `<a href=\"#\" class=\"picture__link\">\r\n      <img class=\"picture__img\" src=\"${url}\" width=\"182\" height=\"182\" alt=\"Случайная фотография\">\r\n      <p class=\"picture__stats\">\r\n        <span class=\"picture__stat picture__stat--comments\">${comments.length}</span>\r\n        <span class=\"picture__stat picture__stat--likes\">${likes}</span>\r\n      </p>\r\n    </a>`\r\n  );\r\n};\r\n\r\nexport default class Picture extends AbstractView {\r\n  constructor(picture) {\r\n    super();\r\n\r\n    this._picture = picture;\r\n    this._callback = {};\r\n\r\n    this._clickHandler = this._clickHandler.bind(this);\r\n  }\r\n\r\n  getTemplate() {\r\n    return createPictureTemplate(this._picture);\r\n  }\r\n\r\n  _clickHandler() {\r\n    this._callback.click();\r\n  }\r\n\r\n  setClickHandler(callback) {\r\n    this._callback.click = callback;\r\n\r\n    this.getElement().querySelector(`.picture__img`)\r\n      .addEventListener(`click`, this._clickHandler);\r\n    this.getElement().querySelector(`.picture__stats`)\r\n      .addEventListener(`click`, this._clickHandler);\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\n\r\nconst createPicturesContainerTemplate = () => {\r\n  return (\r\n    `<section class=\"pictures container\">\r\n      <h2 class=\"pictures__title visually-hidden\">Фотографии других пользователей</h2>\r\n    </section>`\r\n  );\r\n};\r\n\r\nexport default class PicturesContainer extends AbstractView {\r\n  getTemplate() {\r\n    return createPicturesContainerTemplate();\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\n\r\nconst createLoadMoreBtnTemplate = () => {\r\n  return `<button class=\"social__loadmore\" type=\"button\">Загрузить еще</button>`;\r\n};\r\n\r\nexport default class SocialLoadMoreBtn extends AbstractView {\r\n  getTemplate() {\r\n    return createLoadMoreBtnTemplate();\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\n\r\nconst createNewImgFormTemplate = () => {\r\n  return (\r\n    `<section class=\"img-upload\">\r\n      <div class=\"img-upload__wrapper\">\r\n        <h2 class=\"img-upload__title visually-hidden\">Загрузка фотографии</h2>\r\n\r\n        <form class=\"img-upload__form\" id=\"upload-select-image\" method=\"post\" enctype=\"multipart/form-data\" action=\"https://js.dump.academy/kekstagram\" autocomplete=\"off\">\r\n\r\n          <fieldset class=\"img-upload__start\">\r\n            <input type=\"file\" id=\"upload-file\" class=\"img-upload__input visually-hidden\" name=\"filename\" required>\r\n            <label for=\"upload-file\" class=\"img-upload__label img-upload__control\">Загрузить</label>\r\n          </fieldset>\r\n \r\n        </form>\r\n      </div>\r\n    </section>`\r\n  );\r\n};\r\n\r\nexport default class UploadNewImgForm extends AbstractView {\r\n  constructor() {\r\n    super();\r\n\r\n    this._callback = {};\r\n\r\n    this._imgUploadInputHandler = this._imgUploadInputHandler.bind(this);\r\n  }\r\n\r\n  getTemplate() {\r\n    return createNewImgFormTemplate();\r\n  }\r\n\r\n  _imgUploadInputHandler() {\r\n    this._callback.fileAploaded();\r\n  }\r\n\r\n  setImgUploadInputHandler(callback) {\r\n    this._callback.fileAploaded = callback;\r\n\r\n    this.getElement().querySelector(`.img-upload__input`)\r\n      .addEventListener(`change`, this._imgUploadInputHandler);\r\n  }\r\n\r\n  getFile() {\r\n    return this.getElement().querySelector(`.img-upload__input`).files[0];\r\n  }\r\n\r\n  getFormContainer() {\r\n    return this.getElement().querySelector(`.img-upload__form`);\r\n  }\r\n\r\n  resetInputValue() {\r\n    this.getElement().querySelector(`.img-upload__input`).value = ``;\r\n  }\r\n}\r\n"],"sourceRoot":""}