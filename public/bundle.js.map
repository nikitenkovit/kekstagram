{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/api.js","webpack:///./src/const.js","webpack:///./src/main.js","webpack:///./src/model/pictures.js","webpack:///./src/presenter/board.js","webpack:///./src/presenter/picture.js","webpack:///./src/utils/observer.js","webpack:///./src/utils/render.js","webpack:///./src/view/abstract.js","webpack:///./src/view/big-picture-overlay.js","webpack:///./src/view/filter.js","webpack:///./src/view/img-upload-message-dragndrop.js","webpack:///./src/view/img-upload-message-error.js","webpack:///./src/view/img-upload-message-loading.js","webpack:///./src/view/img-upload-message-processing.js","webpack:///./src/view/img-upload-overlay.js","webpack:///./src/view/picture.js","webpack:///./src/view/pictures-container.js","webpack:///./src/view/uploadNewImgForm.js"],"names":[],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAA+C;;AAE/C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,YAAY;AACnC;AACA,6CAA6C;AAC7C;;AAEA;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA;AACA,+BAA+B,mCAAmC;AAClE,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,mCAAmC;AAClE,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA,QAAQ;AACR;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,WAAW,eAAe,GAAG,IAAI;AACjC,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB,gBAAgB,IAAI,oBAAoB;AACjE;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;ACzFA;AAAA;AAAA;AAAO;AACP;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;;;;;;;;;;;;;ACXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgE;AACmB;AACR;AAC3B;AACE;AACZ;AACX;;AAE3B;AACA;;AAEA;;AAEA,gBAAgB,+CAAG;;AAEnB,0BAA0B,0DAAa;;AAEvC,2BAA2B,2DAAc;;AAEzC;;AAEA;AACA;AACA,8BAA8B,oDAAU;AACxC;AACA,GAAG;AACH;AACA,8BAA8B,oDAAU;AACxC,GAAG;;;;;;;;;;;;;AC5BH;AAAA;AAAA;AAA4C;;AAE7B,uBAAuB,0DAAQ;AAC9C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;ACzDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AACqC;AACM;AACvB;AACA;AACnB;AACsB;AAC3B;;AAExB;AACf;AACA;AACA;AACA;;AAEA;AACA,2CAA2C,8EAA8B;AACzE,2CAA2C,gEAAqB;AAChE,0CAA0C,iEAAoB;;AAE9D;AACA;;AAEA;AACA,IAAI,+DAAM,yDAAyD,+DAAc;AACjF,IAAI,+DAAM,oEAAoE,+DAAc;;AAE5F;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kDAAkD;AAC/E;AACA;AACA,WAAW,oDAAU;AACrB;AACA,QAAQ,+DAAM;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gCAAgC,uDAAU;AAC1C;;AAEA,IAAI,+DAAM,8CAA8C,+DAAc;AACtE;;AAEA;AACA,IAAI,+DAAM,yDAAyD,+DAAc;AACjF;;AAEA;AACA,iCAAiC,mDAAgB,mCAAmC;AACpF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;;;;;;;;;;;AC9FA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6C;AACsB;AACD;AACf;;AAEnD;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEe;AACf,qCAAqC;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iCAAiC,wDAAW;AAC5C,2CAA2C,oEAAqB;;AAEhE,IAAI,+DAAM,qDAAqD,+DAAc;AAC7E;AACA;;;;;;;;;;;;;ACnCA;AAAA;AAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;AChBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;;AAEpC;AACP;AACA;AACA;;AAEO;AACP,2BAA2B,yDAAQ;AACnC;AACA;;AAEA,uBAAuB,yDAAQ;AAC/B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEA,6BAA6B,yDAAQ;AACrC;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;AC9DA;AAAA;AAAA;AAAiD;;AAEjD;;AAEe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,sEAAa;AACnC;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iDAAiD,+BAA+B;AAChF;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;;;;;;ACrCA;AAAA;AAAA;AAAsC;;AAEtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,gCAAgC,iDAAY;AAC3D;AACA;AACA;AACA;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAAyC;;AAElC;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,qBAAqB,oDAAY;AAChD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAsC;;AAEtC;AACA;AACA;;AAEe,wCAAwC,iDAAY;AACnE;AACA;AACA;AACA;;;;;;;;;;;;;ACVA;AAAA;AAAA;AAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,oCAAoC,iDAAY;AAC/D;AACA;AACA;AACA;;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAsC;;AAEtC;AACA;AACA;;AAEe,sCAAsC,iDAAY;AACjE;AACA;AACA;AACA;;;;;;;;;;;;;ACVA;AAAA;AAAA;AAAsC;;AAEtC;AACA;AACA;;AAEe,yCAAyC,iDAAY;AACpE;AACA;AACA;AACA;;;;;;;;;;;;;ACVA;AAAA;AAAA;AAAsC;;AAEtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEe,+BAA+B,iDAAY;AAC1D;AACA;AACA;AACA;;;;;;;;;;;;;AC3FA;AAAA;AAAA;AAAsC;;AAEtC;AACA,SAAS,qBAAqB;;AAE9B;AACA;AACA,uCAAuC,IAAI;AAC3C;AACA,8DAA8D,gBAAgB;AAC9E,2DAA2D,MAAM;AACjE;AACA;AACA;AACA;;AAEe,sBAAsB,iDAAY;AACjD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,gCAAgC,iDAAY;AAC3D;AACA;AACA;AACA;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAsC;;AAEtC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEe,+BAA+B,iDAAY;AAC1D;AACA;AACA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.js\");\n","import PictureModel from \"./model/pictures.js\";\r\n\r\nconst Method = {\r\n  GET: `GET`,\r\n  // PUT: `PUT`,\r\n  POST: `POST`,\r\n  // DELETE: `DELETE`\r\n};\r\n\r\nconst SuccessHTTPStatusRange = {\r\n  MIN: 200,\r\n  MAX: 299\r\n};\r\n\r\nexport default class Api {\r\n  constructor(endPoint, authorization) {\r\n    this._endPoint = endPoint;\r\n    this._authorization = authorization;\r\n  }\r\n\r\n  getPictures() {\r\n    return this._load({url: `data`})\r\n      .then(Api.toJSON)\r\n      // .then((pictures) => Object.assign({}, pictures));\r\n  }\r\n\r\n  // updateTask(task) {\r\n  //   return this._load({\r\n  //     url: `tasks/${task.id}`,\r\n  //     method: Method.PUT,\r\n  //     body: JSON.stringify(PhotosModel.adaptToServer(task)),\r\n  //     headers: new Headers({\"Content-Type\": `application/json`})\r\n  //   })\r\n  //     .then(Api.toJSON)\r\n  //     .then(PhotosModel.adaptToClient);\r\n  // }\r\n  //\r\n  // addTask(task) {\r\n  //   return this._load({\r\n  //     url: `tasks`,\r\n  //     method: Method.POST,\r\n  //     body: JSON.stringify(PhotosModel.adaptToServer(task)),\r\n  //     headers: new Headers({\"Content-Type\": `application/json`})\r\n  //   })\r\n  //     .then(Api.toJSON)\r\n  //     .then(PhotosModel.adaptToClient);\r\n  // }\r\n\r\n  // deleteTask(task) {\r\n  //   return this._load({\r\n  //     url: `tasks/${task.id}`,\r\n  //     method: Method.DELETE\r\n  //   });\r\n  // }\r\n\r\n  _load({\r\n    url,\r\n    method = Method.GET,\r\n    body = null,\r\n    // headers = new Headers()\r\n  }) {\r\n    // headers.append(`Authorization`, this._authorization);\r\n\r\n    return fetch(\r\n        `${this._endPoint}/${url}`,\r\n        {method, body}\r\n    )\r\n      .then(Api.checkStatus)\r\n      .catch(Api.catchError);\r\n  }\r\n\r\n  static checkStatus(response) {\r\n    if (\r\n      response.status < SuccessHTTPStatusRange.MIN ||\r\n      response.status > SuccessHTTPStatusRange.MAX\r\n    ) {\r\n      throw new Error(`${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    return response;\r\n  }\r\n\r\n  static toJSON(response) {\r\n    return response.json();\r\n  }\r\n\r\n  static catchError(err) {\r\n    throw err;\r\n  }\r\n}\r\n","export const UpdateType = {\r\n  PATCH: `PATCH`,\r\n  MINOR: `MINOR`,\r\n  MAJOR: `MAJOR`,\r\n  INIT: `INIT`\r\n};\r\n\r\nexport const UserAction = {\r\n  UPDATE_PICTURE: `UPDATE_PICTURE`,\r\n  ADD_PICTURE: `ADD_PICTURE`,\r\n  DELETE_PICTURE: `DELETE_PICTURE`\r\n};\r\n","import ImgUploadOverlayView from \"./view/img-upload-overlay.js\";\r\nimport ImgUploadMessageDragndropView from \"./view/img-upload-message-dragndrop.js\";\r\nimport ImgUploadMessageErrorView from \"./view/img-upload-message-error.js\";\r\nimport PicturesModel from \"./model/pictures.js\";\r\nimport BoardPresenter from \"./presenter/board.js\";\r\nimport {UpdateType} from \"./const.js\";\r\nimport Api from \"./api.js\";\r\n\r\nconst AUTHORIZATION = `Basic hS2sd3dfSwcl1sa2j1`;\r\nconst END_POINT = `https://javascript.pages.academy/kekstagram`;\r\n\r\nconst siteMainElement = document.querySelector(`main`);\r\n\r\nconst api = new Api(END_POINT, AUTHORIZATION);\r\n\r\nconst picturesModel = new PicturesModel();\r\n\r\nconst boardPresenter = new BoardPresenter(siteMainElement, picturesModel);\r\n\r\nboardPresenter.init();\r\n\r\napi.getPictures()\r\n  .then((tasks) => {\r\n    picturesModel.setPictures(UpdateType.INIT, tasks);\r\n    // console.log(picturesModel.getPictures())\r\n  })\r\n  .catch(() => {\r\n    picturesModel.setPictures(UpdateType.INIT, []);\r\n  });\r\n","import Observer from \"../utils/observer.js\";\r\n\r\nexport default class Pictures extends Observer {\r\n  constructor() {\r\n    super();\r\n    this._pictures = [];\r\n  }\r\n\r\n  setPictures(updateType, pictures) {\r\n    this._pictures = pictures.slice();\r\n\r\n    this._notify(updateType);\r\n  }\r\n\r\n  getPictures() {\r\n    return this._pictures;\r\n  }\r\n\r\n  // updatePhotos(updateType, update) {\r\n  //   const index = this._pictures.findIndex((picture) => picture.id === update.id);\r\n  //\r\n  //   if (index === -1) {\r\n  //     throw new Error(`Can't update unexisting picture`);\r\n  //   }\r\n  //\r\n  //   this._pictures = [\r\n  //     ...this._pictures.slice(0, index),\r\n  //     update,\r\n  //     ...this._pictures.slice(index + 1)\r\n  //   ];\r\n  //\r\n  //   this._notify(updateType, update);\r\n  // }\r\n\r\n  addPicture(updateType, update) {\r\n    this._pictures = [\r\n      update,\r\n      ...this._pictures\r\n    ];\r\n\r\n    this._notify(updateType, update);\r\n  }\r\n\r\n  deletePhoto(updateType, update) {\r\n    const index = this._pictures.findIndex((picture) => picture.id === update.id);\r\n\r\n    if (index === -1) {\r\n      throw new Error(`Can't delete unexisting picture`);\r\n    }\r\n\r\n    this._pictures = [\r\n      ...this._pictures.slice(0, index),\r\n      ...this._pictures.slice(index + 1)\r\n    ];\r\n\r\n    this._notify(updateType);\r\n  }\r\n}\r\n","import FilterView from \"../view/filter.js\";\r\nimport ImgUploadMessageLoadingView from \"../view/img-upload-message-loading.js\";\r\nimport ImgUploadMessageProcessingView from \"../view/img-upload-message-processing.js\";\r\nimport PicturesContainerView from \"../view/pictures-container\";\r\nimport UploadNewImgFormView from \"../view/uploadNewImgForm.js\";\r\nimport PicturePresenter from \"./picture.js\";\r\nimport {RenderPosition, render, remove} from \"../utils/render.js\";\r\nimport {UpdateType} from \"../const.js\";\r\n\r\nexport default class Board {\r\n  constructor(container, picturesModel) {\r\n    this._picturesModel = picturesModel;\r\n    this._boardContainer = container;\r\n    this._isLoading = true;\r\n\r\n    this._filterComponent = null;\r\n    this._messageProcessingComponent = new ImgUploadMessageProcessingView();\r\n    this._picturesContainerComponent = new PicturesContainerView();\r\n    this._uploadNewImgFormComponent = new UploadNewImgFormView();\r\n\r\n    this._handleModelEvent = this._handleModelEvent.bind(this);\r\n  }\r\n\r\n  init() {\r\n    render(this._boardContainer, this._picturesContainerComponent, RenderPosition.BEFOREEND);\r\n    render(this._picturesContainerComponent, this._uploadNewImgFormComponent, RenderPosition.BEFOREEND);\r\n\r\n    this._picturesModel.addObserver(this._handleModelEvent);\r\n\r\n    this._renderBoard();\r\n  }\r\n\r\n  _getPictures() {\r\n    return this._picturesModel.getPictures();\r\n  }\r\n\r\n  _handleModelEvent(updateType) {\r\n    switch (updateType) {\r\n      // case UpdateType.PATCH:\r\n      //   this._picturePresenter[data.id].init(data);\r\n      //   break;\r\n      // case UpdateType.MINOR:\r\n      //   this._clearBoard();\r\n      //   this._renderBoard();\r\n      //   break;\r\n      // case UpdateType.MAJOR:\r\n      //   this._clearBoard({resetRenderedTaskCount: true, resetSortType: true});\r\n      //   this._renderBoard();\r\n      //   break;\r\n      case UpdateType.INIT:\r\n        this._isLoading = false;\r\n        remove(this._messageProcessingComponent);\r\n        this._renderBoard();\r\n        break;\r\n    }\r\n  }\r\n\r\n  _renderFilters() {\r\n    if (this._filterComponent !== null) {\r\n      this._filterComponent = null;\r\n    }\r\n\r\n    this._filterComponent = new FilterView() // needed add (this._currentSortType);\r\n    // this._sortComponent.setSortTypeChangeHandler(this._handleSortTypeChange);\r\n\r\n    render(this._boardContainer, this._filterComponent, RenderPosition.AFTERBEGIN);\r\n  }\r\n\r\n  _renderMessageProcessing() {\r\n    render(this._boardContainer, this._messageProcessingComponent, RenderPosition.BEFOREEND);\r\n  }\r\n\r\n  _renderPicture(picture) {\r\n    const picturePresenter = new PicturePresenter(this._picturesContainerComponent); // added this._handleViewAction, this._handleModeChange\r\n    picturePresenter.init(picture);\r\n    // this._picturePresenter[picture.id] = picturePresenter;\r\n  }\r\n\r\n  _renderPictures(pictures) {\r\n    pictures.forEach((picture) => this._renderPicture(picture));\r\n  }\r\n\r\n  _renderBoard() {\r\n    if (this._isLoading) {\r\n      this._renderMessageProcessing();\r\n      return;\r\n    }\r\n\r\n    this._renderFilters();\r\n\r\n    const pictures = this._getPictures();\r\n\r\n    this._renderPictures(pictures.slice());\r\n  }\r\n}\r\n","import PictureView from \"../view/picture.js\";\r\nimport BigPictureOverlayView from \"../view/big-picture-overlay.js\";\r\nimport {render, RenderPosition, remove} from \"../utils/render.js\";\r\nimport {UserAction, UpdateType} from \"../const.js\";\r\n\r\nconst Mode = {\r\n  DEFAULT: `DEFAULT`,\r\n  MODAL_OPEN: `MODAL_OPEN`\r\n};\r\n\r\nexport const State = {\r\n  SAVING: `SAVING`,\r\n  DELETING: `DELETING`,\r\n  ABORTING: `ABORTING`\r\n};\r\n\r\nexport default class Picture {\r\n  constructor(pictureListContainer) { // added changeData and changeMode\r\n    this._pictureListContainer = pictureListContainer;\r\n    // this._changeData = changeData;\r\n    // this._changeMode = changeMode;\r\n\r\n    this._pictureComponent = null;\r\n    this._bigPictureOverlayComponent = null;\r\n    this._mode = Mode.DEFAULT;\r\n  }\r\n\r\n  init(picture) {\r\n    this._picture = picture;\r\n\r\n    this._pictureComponent = new PictureView(picture);\r\n    this._bigPictureOverlayComponent = new BigPictureOverlayView(picture);\r\n\r\n    render(this._pictureListContainer, this._pictureComponent, RenderPosition.BEFOREEND);\r\n  }\r\n}\r\n","export default class Observer {\r\n  constructor() {\r\n    this._observers = [];\r\n  }\r\n\r\n  addObserver(observer) {\r\n    this._observers.push(observer);\r\n  }\r\n\r\n  removeObserver(observer) {\r\n    this._observers = this._observers.filter((existedObserver) => existedObserver !== observer);\r\n  }\r\n\r\n  _notify(event, payload) {\r\n    this._observers.forEach((observer) => observer(event, payload));\r\n  }\r\n}\r\n","import Abstract from \"../view/abstract.js\";\r\n\r\nexport const RenderPosition = {\r\n  AFTERBEGIN: `afterbegin`,\r\n  BEFOREEND: `beforeend`\r\n};\r\n\r\nexport const render = (container, child, place) => {\r\n  if (container instanceof Abstract) {\r\n    container = container.getElement();\r\n  }\r\n\r\n  if (child instanceof Abstract) {\r\n    child = child.getElement();\r\n  }\r\n\r\n  switch (place) {\r\n    case RenderPosition.AFTERBEGIN:\r\n      container.prepend(child);\r\n      break;\r\n    case RenderPosition.BEFOREEND:\r\n      container.append(child);\r\n      break;\r\n  }\r\n};\r\n\r\nexport const createElement = (template) => {\r\n  const newElement = document.createElement(`div`);\r\n  newElement.innerHTML = template;\r\n\r\n  return newElement.firstChild;\r\n};\r\n\r\n// export const replace = (newChild, oldChild) => {\r\n//   if (oldChild instanceof Abstract) {\r\n//     oldChild = oldChild.getElement();\r\n//   }\r\n//\r\n//   if (newChild instanceof Abstract) {\r\n//     newChild = newChild.getElement();\r\n//   }\r\n//\r\n//   const parent = oldChild.parentElement;\r\n//\r\n//   if (parent === null || oldChild === null || newChild === null) {\r\n//     throw new Error(`Can't replace unexisting elements`);\r\n//   }\r\n//\r\n//   parent.replaceChild(newChild, oldChild);\r\n// };\r\n\r\nexport const remove = (component) => {\r\n  if (component === null) {\r\n    return;\r\n  }\r\n\r\n  if (!(component instanceof Abstract)) {\r\n    throw new Error(`Can remove only components`);\r\n  }\r\n\r\n  component.getElement().remove();\r\n  component.removeElement();\r\n};\r\n","import {createElement} from \"../utils/render.js\";\r\n\r\nconst SHAKE_ANIMATION_TIMEOUT = 600;\r\n\r\nexport default class Abstract {\r\n  constructor() {\r\n    if (new.target === Abstract) {\r\n      throw new Error(`Can't instantiate Abstract, only concrete one.`);\r\n    }\r\n\r\n    this._element = null;\r\n    this._callback = {};\r\n  }\r\n\r\n  getTemplate() {\r\n    throw new Error(`Abstract method not implemented: getTemplate`);\r\n  }\r\n\r\n  getElement() {\r\n    if (!this._element) {\r\n      this._element = createElement(this.getTemplate());\r\n    }\r\n\r\n    return this._element;\r\n  }\r\n\r\n  removeElement() {\r\n    this._element = null;\r\n  }\r\n\r\n  shake(callback) {\r\n    this.getElement().style.animation = `shake ${SHAKE_ANIMATION_TIMEOUT / 1000}s`;\r\n    setTimeout(() => {\r\n      this.getElement().style.animation = ``;\r\n      callback();\r\n    }, SHAKE_ANIMATION_TIMEOUT);\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\n\r\nconst createBigPictureOverlayTemplate = () => {\r\n  return (\r\n    `<section class=\"big-picture overlay\">\r\n      <h2 class=\"big-picture__title visually-hidden\">Просмотр фотографии</h2>\r\n      <div class=\"big-picture__preview\">\r\n\r\n        <div class=\"big-picture__img\">\r\n          <img class=\"big-picture__img--img\" src=\"#\" alt=\"Выбранная фотография\" width=\"600\" height=\"600\">\r\n        </div>\r\n\r\n        <div class=\"big-picture__social social\">\r\n          <div class=\"social__header\">\r\n            <img class=\"social__picture\" src=\"img/avatar-1.svg\" alt=\"Аватар автора фотографии\" width=\"35\" height=\"35\">\r\n            <p class=\"social__caption\"></p>\r\n            <p class=\"social__likes\">Нравится <span class=\"likes-count\"></span></p>\r\n          </div>\r\n          <div class=\"social__comment-count\"><span class=\"current-comment-count\">5</span> из <span class=\"comments-count\">125</span> комментариев</div>\r\n          <ul class=\"social__comments\">\r\n          </ul>\r\n          <button class=\"social__loadmore\" type=\"button\">Загрузить еще</button>\r\n          <div class=\"social__footer\">\r\n            <img class=\"social__picture\" src=\"img/avatar-6.svg\" alt=\"Аватар комментатора фотографии\" width=\"35\" height=\"35\">\r\n            <input type=\"text\" class=\"social__footer-text\" placeholder=\"Ваш комментарий...\">\r\n            <button type=\"button\" class=\"social__footer-btn\" name=\"button\">Отправить</button>\r\n          </div>\r\n        </div>\r\n        <button type=\"reset\" class=\"big-picture__cancel cancel\" id=\"picture-cancel\">Закрыть</button>\r\n      </div>\r\n    </section>`\r\n  );\r\n};\r\n\r\nexport default class BigPictureOverlay extends AbstractView {\r\n  getTemplate() {\r\n    return createBigPictureOverlayTemplate();\r\n  }\r\n}\r\n","import AbstractView from \"./abstract.js\";\r\n\r\nexport const createFilterTemplate = () => {\r\n  return (\r\n    `<section class=\"img-filters container\">\r\n      <h2 class=\"img-filters__title visually-hidden\">Фильтр фотографий</h2>\r\n\r\n      <form class=\"img-filters__form\" action=\"index.html\" method=\"get\" autocomplete=\"off\">\r\n        <button type=\"button\" class=\"img-filters__button img-filters__button--active\" id=\"filter-popular\">Популярные</button>\r\n        <button type=\"button\" class=\"img-filters__button\" id=\"filter-new\">Новые</button>\r\n        <button type=\"button\" class=\"img-filters__button\" id=\"filter-discussed\">Обсуждаемые</button>\r\n      </form>\r\n    </section>`\r\n  );\r\n};\r\n\r\nexport default class Filter extends AbstractView {\r\n  constructor(filters = null, currentFilterType = null) {\r\n    super();\r\n    this._filters = filters;\r\n    this._currentFilter = currentFilterType;\r\n\r\n    this._filterTypeChangeHandler = this._filterTypeChangeHandler.bind(this);\r\n  }\r\n\r\n  getTemplate() {\r\n    return createFilterTemplate(this._filters, this._currentFilter);\r\n  }\r\n\r\n  _filterTypeChangeHandler(evt) {\r\n    evt.preventDefault();\r\n    this._callback.filterTypeChange(evt.target.value);\r\n  }\r\n\r\n  setFilterTypeChangeHandler(callback) {\r\n    this._callback.filterTypeChange = callback;\r\n    this.getElement().addEventListener(`change`, this._filterTypeChangeHandler);\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\n\r\nconst createMessageDragndropTemplate = () => {\r\n  return `<div class=\"img-upload__message img-upload__message--dragndrop\">Сюда!</div>`;\r\n};\r\n\r\nexport default class ImgUploadMessageDragndrop extends AbstractView {\r\n  getTemplate() {\r\n    return createMessageDragndropTemplate();\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\n\r\nconst createMessageErrorTemplate = () => {\r\n  return (\r\n    ` <div class=\"img-upload__message img-upload__message--error error\">Ошибка загрузки файла\r\n      <div class=\"error__links\">\r\n        <a class=\"error__link\" href=\"#\">Попробовать снова</a>\r\n        <a class=\"error__link\" href=\"#\">Загрузить другой файл</a>\r\n      </div>\r\n    </div>`\r\n  );\r\n};\r\n\r\nexport default class ImgUploadMessageError extends AbstractView {\r\n  getTemplate() {\r\n    return createMessageErrorTemplate();\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\n\r\nconst createMessageLoadingTemplate = () => {\r\n  return `<div class=\"img-upload__message img-upload__message--loading\">Загружаем...</div>`;\r\n};\r\n\r\nexport default class ImgUploadMessageLoading extends AbstractView {\r\n  getTemplate() {\r\n    return createMessageLoadingTemplate();\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\n\r\nconst createMessageProcessingTemplate = () => {\r\n  return `<div class=\"img-upload__message img-upload__message--processing\">Кексограмим...</div>`;\r\n};\r\n\r\nexport default class ImgUploadMessageProcessing extends AbstractView {\r\n  getTemplate() {\r\n    return createMessageProcessingTemplate();\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\n\r\nconst createImgUploadOverlayTemplate = () => {\r\n  return (\r\n    `<div class=\"img-upload__overlay\">\r\n        <div class=\"img-upload__wrapper\">\r\n          <div class=\"img-upload__preview-container\">\r\n  \r\n            <fieldset class=\"img-upload__resize resize\">\r\n              <button type=\"button\" class=\"resize__control resize__control--minus\">Уменьшить</button>\r\n              <input type=\"text\" class=\"resize__control resize__control--value\" value=\"50%\" title=\"Image Scale\" name=\"scale\" readonly>\r\n              <button type=\"button\" class=\"resize__control resize__control--plus\">Увеличить</button>\r\n            </fieldset>\r\n  \r\n            <div class=\"img-upload__preview\">\r\n              <img src=\"img/upload-default-image.jpg\" alt=\"Предварительный просмотр фотографии\">\r\n            </div>\r\n  \r\n            <fieldset class=\"img-upload__scale scale\">\r\n              <input type=\"number\" class=\"scale__value\" name=\"effect-level\" min=\"0\" max=\"100\" value=\"100\">\r\n              <div class=\"scale__line\">\r\n                <div class=\"scale__pin\" tabindex=\"0\">Кнопка изменения глубины эффекта фотографии</div>\r\n                <div class=\"scale__level\">Глубина эффекта фотографии</div>\r\n              </div>\r\n            </fieldset>\r\n  \r\n            <button type=\"reset\" class=\"img-upload__cancel cancel\" id=\"upload-cancel\">Закрыть</button>\r\n          </div>\r\n  \r\n          <fieldset class=\"img-upload__effects effects\">\r\n            <ul class=\"effects__list\">\r\n              <li class=\"effects__item\">\r\n                <input type=\"radio\" class=\"effects__radio visually-hidden\" name=\"effect\" id=\"effect-none\" value=\"none\" checked>\r\n                <label for=\"effect-none\" class=\"effects__label\">\r\n                  <span class=\"effects__preview effects__preview--none\">Превью фото без эффекта</span>\r\n                  Оригинал\r\n                </label>\r\n              </li>\r\n              <li class=\"effects__item\">\r\n                <input type=\"radio\" class=\"effects__radio visually-hidden\" name=\"effect\" id=\"effect-chrome\" value=\"chrome\">\r\n                <label for=\"effect-chrome\" class=\"effects__label\">\r\n                  <span class=\"effects__preview effects__preview--chrome\">Превью эффекта Хром</span>\r\n                  Хром\r\n                </label>\r\n              </li>\r\n              <li class=\"effects__item\">\r\n                <input type=\"radio\" class=\"effects__radio visually-hidden\" name=\"effect\" id=\"effect-sepia\" value=\"sepia\">\r\n                <label for=\"effect-sepia\" class=\"effects__label\">\r\n                  <span class=\"effects__preview effects__preview--sepia\">Превью эффекта Сепия</span>\r\n                  Сепия\r\n                </label>\r\n              </li>\r\n              <li class=\"effects__item\">\r\n                <input type=\"radio\" class=\"effects__radio visually-hidden\" name=\"effect\" id=\"effect-marvin\" value=\"marvin\">\r\n                <label for=\"effect-marvin\" class=\"effects__label\">\r\n                  <span class=\"effects__preview effects__preview--marvin\">Превью эффекта Марвин</span>\r\n                  Марвин\r\n                </label>\r\n              </li>\r\n              <li class=\"effects__item\">\r\n                <input type=\"radio\" class=\"effects__radio visually-hidden\" name=\"effect\" id=\"effect-phobos\" value=\"phobos\">\r\n                <label for=\"effect-phobos\" class=\"effects__label\">\r\n                  <span class=\"effects__preview effects__preview--phobos\">Превью эффекта Фобос</span>\r\n                  Фобос\r\n                </label>\r\n              </li>\r\n              <li class=\"effects__item\">\r\n                <input type=\"radio\" class=\"effects__radio visually-hidden\" name=\"effect\" id=\"effect-heat\" value=\"heat\">\r\n                <label for=\"effect-heat\" class=\"effects__label\">\r\n                  <span class=\"effects__preview effects__preview--heat\">Превью эффекта Зной</span>\r\n                  Зной\r\n                </label>\r\n              </li>\r\n            </ul>\r\n          </fieldset>\r\n  \r\n          <fieldset class=\"img-upload__text text\">\r\n            <input class=\"text__hashtags\" type=\"text\" name=\"hashtags\" placeholder=\"#хэш-тег\">\r\n            <textarea class=\"text__description\" name=\"description\" placeholder=\"Ваш комментарий...\" maxlength=\"140\"></textarea>\r\n          </fieldset>\r\n  \r\n          <button type=\"submit\" class=\"img-upload__submit\" id=\"upload-submit\">Опубликовать</button>\r\n        </div>\r\n      </div>`\r\n  );\r\n};\r\n\r\nexport default class ImgUploadOverlay extends AbstractView {\r\n  getTemplate() {\r\n    return createImgUploadOverlayTemplate();\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\n\r\nconst createPictureTemplate = (picture) => {\r\n  const {comments, likes, url} = picture;\r\n\r\n  return (\r\n    `<a href=\"#\" class=\"picture__link\">\r\n      <img class=\"picture__img\" src=\"${url}\" width=\"182\" height=\"182\" alt=\"Случайная фотография\">\r\n      <p class=\"picture__stats\">\r\n        <span class=\"picture__stat picture__stat--comments\">${comments.length}</span>\r\n        <span class=\"picture__stat picture__stat--likes\">${likes}</span>\r\n      </p>\r\n    </a>`\r\n  );\r\n};\r\n\r\nexport default class Picture extends AbstractView {\r\n  constructor(picture) {\r\n    super();\r\n\r\n    this._picture = picture;\r\n  }\r\n\r\n  getTemplate() {\r\n    return createPictureTemplate(this._picture);\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\n\r\nconst createPicturesContainerTemplate = () => {\r\n  return (\r\n    `<section class=\"pictures container\">\r\n      <h2 class=\"pictures__title visually-hidden\">Фотографии других пользователей</h2>\r\n    </section>`\r\n  );\r\n};\r\n\r\nexport default class PicturesContainer extends AbstractView {\r\n  getTemplate() {\r\n    return createPicturesContainerTemplate();\r\n  }\r\n}\r\n","import AbstractView from \"./abstract\";\r\n\r\nconst createNewImgFormTemplate = () => {\r\n  return (\r\n    `<section class=\"img-upload\">\r\n      <div class=\"img-upload__wrapper\">\r\n        <h2 class=\"img-upload__title visually-hidden\">Загрузка фотографии</h2>\r\n\r\n        <form class=\"img-upload__form\" id=\"upload-select-image\" method=\"post\" enctype=\"multipart/form-data\" action=\"https://js.dump.academy/kekstagram\" autocomplete=\"off\">\r\n\r\n          <fieldset class=\"img-upload__start\">\r\n            <input type=\"file\" id=\"upload-file\" class=\"img-upload__input visually-hidden\" name=\"filename\" required>\r\n            <label for=\"upload-file\" class=\"img-upload__label img-upload__control\">Загрузить</label>\r\n          </fieldset>\r\n \r\n        </form>\r\n      </div>\r\n    </section>`\r\n  );\r\n};\r\n\r\nexport default class UploadNewImgForm extends AbstractView {\r\n  getTemplate() {\r\n    return createNewImgFormTemplate();\r\n  }\r\n}\r\n"],"sourceRoot":""}